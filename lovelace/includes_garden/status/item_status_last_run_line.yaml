# lovelace_gen

type: custom:button-card
entity: {{ entity }}
name: >
  [[[
    var zone = '{{ zone }}';
    return states['input_text.irrigation_' + zone + '_name'].state + '&nbsp-&nbsp';
  ]]]
label: >
  [[[
    if (entity.state == 'skip')
      return 'Zone skipped';
    else if (entity.state == 'below minimum')
      return 'Duration below minumum';
    else if (entity.state == 'None')
      return "0' " + '00"';
    else 
      var total_seconds = parseFloat(entity.state);
      var minutes = (total_seconds / 60).toFixed();
      var seconds = (total_seconds % 60).toFixed();
      while (seconds.length < 2) {seconds = "0" + seconds};
      return minutes + "' " + seconds + '"';
  ]]]
show_label: true
show_icon: false
tap_action: 
  action: none
styles:
  grid:
    - grid-template-areas: '"n l"'
    - grid-template-columns: 25% min-content
    - grid-template-rows: 1fr
  card: 
    - display: >
        [[[
          var zone = '{{ zone }}';
          zone = Number(zone.substring(4, 5));
          var number_of_zones = Number(states['input_number.irrigation_number_of_zones'].state);
          var show_details = states['input_boolean.irrigation_show_last_run_details'].state;
          if (zone > number_of_zones ||
              show_details == 'off')
            return 'none';
          else return null;
        ]]]
    - font-size: 14px
    - font-family: Oswald
    - color: var(--secondary-text-color)
    - padding: 0px
    - height: 1.5em
  name:
    - justify-self: end
  label:
    - justify-self: start
    - color: var(--primary-text-color)
